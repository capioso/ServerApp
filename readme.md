# Server Application
> **Dev:** *_Alexis Hugo Segales Ramoseth_*

## Version 1
> Dumb simple responsive server uploaded

## Version 2
> TLS security for communication with clients

## Version 3
> Database implementation

## Version 4
> Users can send messages, create chats and alert to other logged users.

## Before running
### Server connection
> Once the application server has been set into any cloud, it is better to create a connection from your local to the server, it is better to use SSH then create your private and public key and obviously, install SSH into the server and upload the public Key.
> ```shell
> ssh -i [PRIVATE_KEY_PATH] [USER]@[PUBLIC_IP_ADDRESS_TO_YOUR_SERVER]
> ```

### TLS security
> The connections must be cyphered then there's a special requirement of getting the certification from any authority. Then you need to save it into a keystore:
> ```shell
> # For instance, by creating an auto-signed certificate:
> keytool -genkeypair -alias [ALIAS_FOR_CERTIFICATE] -keyalg RSA -keystore [SERVER_KEYSTORE] -keysize 2048 -validity [VALID_DAYS]
> ```
> So, once the keystore has been set, you can get the .cer file which the client app needs:
> ```shell
> keytool -export -alias [ALIAS_FOR_CERTIFICATE] -file [CERTIFICATE_FILENAME] -keystore [SERVER_KEYSTORE]
> ```
> Finally, the last operation is to transfer the certificate to the client app. Ensure to store the [SERVER_KEYSTORE] into the resources' folder.

### Database
> The server connection works with a MySQL RDBMS, the models gets created each time the application starts. It is just needed to set the right env vars.

### Server Env Vars
> It manages env vars from the server system, then it is needed to ensure that the following variables are created:
> ```shell
> # For the server
> SERVER_PORT # Port to expose the server
> KEYSTORE_PASSWORD # TLS CONFIGURATION
> KEYSTORE_PATH # TLS CONFIGURATION
> JWT_KEYSTORE_PASS # PUBLIC/PRIVATE KEYS FOR TOKEN GENERATOR
> JWT_KEYSTORE_PATH
> # For the Database
> DB_HOST
> DB_PORT
> DB_NAME
> DB_USERNAME
> DB_PASSWORD
> DB_MAX_POOL_SIZE # MAX NUMBER OF CONNECTIONS TO DATABASE FOR MYSQL ORM
> DB_MIN_IDLE # MINIMUM NUMBER OF IDLE CONNECTIONS THAT THE POOL WILL MAINTAIN
> ```

### Upload JAR
> Once all steps have been completed, it is time to get the JAR file:
> ```shell
> mvn clean && mvn compile && mvn package
> ```
> Upload the autogenerated JAR file to the server to the root folder of the server:
> ```shell
> scp -i [PRIVATE_KEY_PATH] [PATH_TO_JAR] [USER]@[PUBLIC_IP_ADDRESS_TO_YOUR_SERVER]:~
> ```

## Start running
> * Once the jar file has been uploaded to the server you can run the jar. (Check your java version from the server and from the application)
> * Execute `java -jar file.jar`